<div class="container mt-5 mb-5">
  <p style="color: #618866"><%= notice %></p>

  <% content_for :title, "Architects" %>

  <h1 class="mt-100 mb-100">Nos architectes</h1>

  <div class="mb-4 d-flex align-items-center gap-3">
    <button id="toggle-filter-btn" class="btn btn-primary">Filtrer</button>
  </div>

  <div id="filter-form-container" style="display: none;">
    <%= form_with url: architects_path, method: :get, local: true do |f| %>
      <div class="d-flex align-items-center gap-3">
        <%= f.label :specialization_id, "Filtrer par spécialité", class: "form-label mb-0" %>
        <%= f.select :specialization_id, options_from_collection_for_select(Specialization.all, :id, :name, params[:specialization_id]), { include_blank: "Toutes les spécialités" }, class: "form-control" %>
        <%= f.submit "Appliquer", class: "btn btn-primary" %>
      </div>
    <% end %>
  </div>

  <div class="d-flex flex-wrap justify-content-start gap-3">
    <% @architects.each do |architect| %>
      <div class="custom-card me-3 mb-4">

        <% multimedia = architect.portfolios.first&.multimedias&.first %>
        <% if multimedia&.file&.attached? %>
          <%= image_tag url_for(multimedia.file), class: "card-image" %>
        <% else %>
          <%= image_tag "placeholder.jpg", class: "card-image" %>
        <% end %>

        <div class="card-body">
          <h6 class="card-name"><%= architect.user.fullname %></h6>
          <p><%= truncate(architect.description, length: 100) %></p>
          <%= link_to "Voir plus", architect_path(architect), class: "btn btn-primary" %>
        </div>
      </div>
    <% end %>
  </div>
</div>

