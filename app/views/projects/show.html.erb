<% content_for :title, "Ton projet" %>
<% content_for :meta_description, "Page récapitulatif de la demande de projet envoyé" %>

<div class="container mt-100 mb-5">
  <p style="color: #618866"><%= notice %></p>

  <%= render @project %>

  <div class="mt-5 mb-5">
   
    <% if current_user == @project.user %>
    <div>
      <%= link_to "Edit this project", edit_project_path(@project) %> |
      <%= button_to "Destroy this project", @project, method: :delete %>
    <%end%>
    <%= link_to "Retour", :back, class: "btn btn-primary" %>

    
  </div>
</div>

<%# === Pour l’architecte, en fonction du statut du projet === %>
<% if current_user.architect? && current_user.architect&.id == @project.architect_id %>
  <% if @project.status == "en_validation" %>
    <%= button_to "Accepter", project_path(@project, project: { status: "en_cours" }), method: :patch, class: "btn btn-success" %>
    <%= button_to "Refuser", project_path(@project, project: { status: "refuse" }), method: :patch, class: "btn btn-danger" %>
  <% elsif @project.status == "en_cours" %>
    <%= button_to "Marquer comme terminé", project_path(@project, project: { status: "termine" }), method: :patch, class: "btn btn-primary" %>
  <% elsif @project.status == "termine" %>
    <% unless @project.portfolio? %>
      <%= button_to "Ajouter au portfolio", project_path(@project, project: { portfolio: true }), method: :patch, class: "btn btn-warning" %>
    <% else %>
      <p>Ce projet est dans votre portfolio</p>
    <% end %>
  <% end %>
<% end %>



<%= link_to "Back to projects", projects_path %>
